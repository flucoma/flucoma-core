#N struct 1021-draw-item float x float y float c float a float b;
#N struct 1022-rectangle float x float c;
#N struct 1022-pixel float x0 float y0 float x1 float y1;
#N canvas 184 23 1462 1103 12;
#X obj 551 847 dac~;
#X floatatom 29 374 10 0 0 0 - - - 0;
#X text 101 374 number of slices found;
#X obj 30 272 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X floatatom 554 735 5 0 0 0 - - - 0;
#X obj 554 801 *~;
#X obj 571 781 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 28 759 fluid.plotter;
#X floatatom 50 625 5 0 0 0 - - - 0;
#X floatatom 104 626 5 0 0 0 - - - 0;
#X obj 50 676 pack f f;
#X obj 104 649 t b f;
#X floatatom 158 626 5 0 0 0 - - - 0;
#X floatatom 212 625 5 0 0 0 - - - 0;
#X obj 158 675 pack f f;
#X obj 212 648 t b f;
#X msg 50 697 xrange \$1 \$2;
#X msg 158 696 yrange \$1 \$2;
#X obj 512 596 array define query 2;
#X obj 364 571 t b l;
#X obj 397 597 array set query;
#X msg 363 624 knearest query;
#X obj 445 675 route knearest;
#X msg 259 540 fit norm;
#X obj 364 650 fluid.kdtree;
#X obj 443 704 symbol;
#X msg 442 729 highlight \$1;
#X obj 555 706 fluid.s2f;
#X msg 26 56 symbol fluid.dataset-help.pd;
#N canvas 152 189 998 764 get_flucoma_demo_files_as_a_list 0;
#X obj 102 60 inlet;
#X obj 102 317 file glob;
#X obj 102 87 file which;
#X obj 102 110 file split;
#X obj 102 134 t l l;
#X obj 134 157 list length;
#X obj 134 181 - 1;
#X obj 102 206 list split;
#X obj 102 229 file join;
#X msg 102 295 symbol \$1/media/*.wav;
#X obj 102 341 list split 1;
#X obj 102 399 list prepend;
#X obj 102 423 t l l;
#X obj 37 452 list store;
#X obj 102 365 symbol;
#X obj 102 253 t b s b;
#X obj 37 476 outlet;
#X connect 0 0 2 0;
#X connect 1 0 10 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 4 1 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 8 0 15 0;
#X connect 9 0 1 0;
#X connect 10 0 14 0;
#X connect 11 0 12 0;
#X connect 12 0 13 1;
#X connect 12 1 11 1;
#X connect 13 0 16 0;
#X connect 14 0 11 0;
#X connect 15 0 13 0;
#X connect 15 1 9 0;
#X connect 15 2 13 1;
#X connect 15 2 11 1;
#X restore 26 80 pd get_flucoma_demo_files_as_a_list;
#X text 23 32 1) Click here to load all the FluCoMa demo audio files
in one 'multiarray', f 74;
#X obj 26 131 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X text 46 130 bang when finished;
#X obj 26 107 fluid.concataudiofiles corpus corpus-text;
#X obj 207 162 clone fluid.multiarray 2 corpus;
#X msg 207 139 vis 0 1;
#X msg 270 139 vis 1 1;
#X obj 207 185 text define corpus-text;
#X obj 166 329 array define slices;
#X obj 29 353 array size slices;
#X obj 29 298 fluid.bufnoveltyslice -source corpus -indices slices
-threshold 0.5, f 68;
#N canvas 449 181 1290 988 describe_each_slice 0;
#X obj 299 178 until;
#X obj 381 225 + 1;
#X msg 360 173 0;
#X obj 439 330 expr $f2 - $f1;
#X msg 439 357 numframes \$1;
#X obj 299 132 t b f b b;
#X obj 299 244 t f f f f;
#X msg 61 244 print;
#X msg 398 161 \; slice-desc const;
#X msg 21 211 clear;
#X msg 113 276 setpoint \$1 slice-desc;
#X obj 298 109 - 1;
#X obj 299 273 array get slices 0 2;
#X obj 299 220 f;
#X obj 298 68 inlet;
#X obj 211 171 outlet;
#X msg 322 355 startframe \$1;
#X obj 299 297 t b f l;
#X obj 298 412 fluid.bufstats -source analysis -stats stats;
#X obj 85 306 fluid.dataset mfccs;
#X obj 298 436 fluid.bufflatten -source stats -destination slice-desc
-numframes 2, f 69;
#X obj 13 83 r flucoma-ds-maker;
#X msg 13 107 write /tmp/flucoma_corpus_mfcc.json;
#X obj 298 388 fluid.bufmfcc 13 -source corpus -features analysis -numchans
1 -startcoeff 1, f 77;
#X obj 997 440 array define slice-desc 26;
#X obj 997 385 clone fluid.multiarray 13 analysis;
#X obj 996 412 clone fluid.multiarray 13 stats 7;
#X connect 0 0 13 0;
#X connect 1 0 13 1;
#X connect 2 0 13 1;
#X connect 3 0 4 0;
#X connect 4 0 23 0;
#X connect 5 0 15 0;
#X connect 5 1 0 0;
#X connect 5 2 2 0;
#X connect 5 3 8 0;
#X connect 6 1 10 0;
#X connect 6 2 12 0;
#X connect 6 3 1 0;
#X connect 7 0 19 0;
#X connect 9 0 19 0;
#X connect 10 0 19 0;
#X connect 11 0 5 0;
#X connect 12 0 17 0;
#X connect 13 0 6 0;
#X connect 14 0 11 0;
#X connect 16 0 23 0;
#X connect 17 0 23 0;
#X connect 17 1 16 0;
#X connect 17 2 3 0;
#X connect 18 0 20 0;
#X connect 21 0 22 0;
#X connect 22 0 19 0;
#X connect 23 0 18 0;
#X restore 30 438 pd describe_each_slice;
#N canvas 656 405 812 331 prep_for_viewing 0;
#X obj 37 37 inlet;
#X msg 37 138 fittransform map norm;
#X obj 37 162 fluid.normalize;
#X obj 137 186 route fittransform;
#X obj 137 210 fluid.ds2text norm norm-dump;
#X obj 137 234 outlet;
#X obj 370 112 fluid.dataset norm;
#X obj 370 145 text define norm-dump;
#X msg 371 85 print;
#X msg 371 26 print;
#X obj 370 53 fluid.dataset map;
#X msg 49 78 fittransform mfccs map;
#X obj 171 106 route fittransform;
#X obj 49 102 fluid.umap;
#X obj 523 24 r flucoma-ds-maker;
#X msg 523 48 write /tmp/flucoma_corpus.json;
#X connect 0 0 11 0;
#X connect 1 0 2 0;
#X connect 2 2 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 8 0 6 0;
#X connect 9 0 10 0;
#X connect 11 0 13 0;
#X connect 12 0 1 0;
#X connect 13 2 12 0;
#X connect 14 0 15 0;
#X connect 15 0 6 0;
#X restore 30 485 pd prep_for_viewing;
#X msg 30 534 setpoints norm-dump;
#N canvas 1165 578 308 296 player 0;
#X obj 37 15 inlet;
#X obj 51 145 phasor~;
#X obj 51 169 *~, f 18;
#X obj 18 200 +~;
#X obj 37 69 t f l;
#X obj 175 96 expr $f2 - $f1;
#X obj 37 45 array get slices 0 2;
#X obj 18 247 outlet~;
#X obj 18 223 tabread~ corpus-0;
#X obj 51 121 expr 44100 / $f1;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 3 1;
#X connect 4 1 5 0;
#X connect 5 0 2 1;
#X connect 5 0 9 0;
#X connect 6 0 4 0;
#X connect 8 0 7 0;
#X connect 9 0 1 0;
#X restore 554 758 pd player;
#X obj 364 545 r click-pos;
#X obj 28 1064 s click-pos;
#X listbox 113 1063 20 0 0 0 - - - 0;
#X text 52 270 2) Click here to segment \, analyse \, reduce in dimension
\, and plot, f 65;
#X text 337 916 3) Click in the 2d plotter to browse. Switch on the
audio to hear the nearest neighbourg;
#X obj 864 293 float;
#X obj 830 293 + 1;
#X msg 912 290 0;
#X obj 866 240 list length;
#X obj 866 264 until;
#X obj 961 420 list store;
#X msg 896 355 get \$1 1;
#X obj 864 317 t f f;
#X obj 879 539 list append;
#X msg 879 563 addlabel \$1 \$2;
#X msg 1011 587 print;
#X obj 867 189 t l l b;
#X obj 879 622 fluid.labelset temp;
#X obj 961 444 file split;
#X obj 961 468 t l l;
#X obj 1014 486 list length;
#X obj 1014 510 - 1;
#X obj 925 506 list split;
#X msg 982 285 clear;
#X text 903 790 4) Write all the files in /tmp/ - get them there and
copy to the repo;
#X msg 907 830 \; flucoma-ds-maker bang;
#X obj 1059 563 r flucoma-ds-maker;
#X obj 918 928 r flucoma-ds-maker;
#X obj 927 1000 soundfiler;
#X msg 918 952 write -bytes 4 /tmp/flucoma_corpus_slices.wav slices
;
#X obj 807 444 makefilename %d;
#X msg 1059 587 write /tmp/flucoma_corpus_files.json;
#X connect 1 0 41 0;
#X connect 3 0 40 0;
#X connect 4 0 44 0;
#X connect 5 0 0 1;
#X connect 5 0 0 0;
#X connect 6 0 5 1;
#X connect 7 0 46 0;
#X connect 7 0 47 0;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 16 0;
#X connect 11 0 10 0;
#X connect 11 1 10 1;
#X connect 12 0 14 0;
#X connect 13 0 15 0;
#X connect 14 0 17 0;
#X connect 15 0 14 0;
#X connect 15 1 14 1;
#X connect 16 0 7 0;
#X connect 17 0 7 0;
#X connect 19 0 21 0;
#X connect 19 1 20 0;
#X connect 21 0 24 0;
#X connect 22 0 25 0;
#X connect 22 0 27 0;
#X connect 23 0 24 0;
#X connect 24 2 22 0;
#X connect 25 0 26 0;
#X connect 26 0 7 0;
#X connect 27 0 4 0;
#X connect 28 0 29 0;
#X connect 29 0 33 0;
#X connect 29 0 61 0;
#X connect 33 0 31 0;
#X connect 35 0 34 0;
#X connect 36 0 34 0;
#X connect 39 0 1 0;
#X connect 40 0 39 0;
#X connect 41 0 42 0;
#X connect 42 0 23 0;
#X connect 42 0 43 0;
#X connect 43 0 7 0;
#X connect 44 0 5 0;
#X connect 45 0 19 0;
#X connect 50 0 51 0;
#X connect 50 0 57 0;
#X connect 51 0 50 1;
#X connect 52 0 50 1;
#X connect 53 0 54 0;
#X connect 54 0 50 0;
#X connect 55 0 63 0;
#X connect 56 0 55 0;
#X connect 57 0 75 0;
#X connect 57 1 56 0;
#X connect 58 0 59 0;
#X connect 59 0 62 0;
#X connect 60 0 62 0;
#X connect 61 0 53 0;
#X connect 61 1 55 1;
#X connect 61 2 52 0;
#X connect 61 2 68 0;
#X connect 63 0 64 0;
#X connect 64 0 67 0;
#X connect 64 1 65 0;
#X connect 65 0 66 0;
#X connect 66 0 67 1;
#X connect 67 1 58 1;
#X connect 68 0 62 0;
#X connect 71 0 76 0;
#X connect 72 0 74 0;
#X connect 74 0 73 0;
#X connect 75 0 58 0;
#X connect 76 0 62 0;
